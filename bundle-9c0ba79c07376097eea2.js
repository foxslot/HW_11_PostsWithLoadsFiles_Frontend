!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);const o="https://foxslot-vs-posts.herokuapp.com",r=new class{constructor(t){this.baseUrl=t}getJSON(t,e,n){this.makeRequest(t,"GET",[],null,e,n)}postJSON(t,e,n,o){null!==e?this.makeRequest(t,"POST",[{name:"Content-Type",value:"application/json"}],JSON.stringify(e),n,o):this.makeRequest(t,"POST",[],null,n,o)}deleteJSON(t,e,n,o){this.makeRequest(t,"DELETE",[],null,n,o)}makeRequest(t,e,n=[],o=[],r,i){const s=new XMLHttpRequest;s.open(e,`${this.baseUrl}${t}`);for(const t of n)s.setRequestHeader(t.name,t.value);s.addEventListener("load",t=>{if(s.status>=200&&s.status<300){const t=JSON.parse(s.responseText);void 0!==r&&r(t)}else void 0!==i&&i(s.statusText)}),s.addEventListener("error",t=>{void 0!==i&&i("Unexpected error")}),s.send(o)}}(o),i=document.getElementById("root");let s=[],a=0,l=0;const d=5,c=document.createElement("form");i.appendChild(c);const u=N("div","form-row",c),m=N("div","form-group col-md-7",u),p=N("div","form-group col-md-3",u),f=N("div","form-group col-md-2",u),b=N("input","form-control my-2 mr-sm-2",m);b.placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É",b.setAttribute("data-id","link");const v=N("select","custom-select my-2 mr-sm-2",p);v.setAttribute("data-id","type");!function(t,e){for(const n of e){const e=document.createElement("option");e.value=n,"regular"===e.value?e.textContent="–û–±—ã—á–Ω—ã–π":"image"===e.value?e.textContent="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ":"audio"===e.value?e.textContent="–ê—É–¥–∏–æ":"video"===e.value?e.textContent="–í–∏–¥–µ–æ":e.textContent=n,t.appendChild(e)}}(v,["regular","image","audio","video"]);const h=N("button","btn btn-primary my-2 mr-sm-2",f);h.textContent="–î–æ–±–∞–≤–∏—Ç—å";const C=c.querySelector("[data-id=link]"),y=c.querySelector("[data-id=type]");c.onsubmit=function(t){t.preventDefault();const e={typeContent:y.value,linkContent:C.value,id:0,content:C.value};r.postJSON("/posts",e,A,R),C.value="",y.value="regular",k.textContent="–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ —Å —Ñ–∞–π–ª–æ–º. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞, —Ñ–∞–π–ª –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ—Å—É—Ä—Å",$.innerHTML="",S.textContent="–ü–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ –≤–∏–¥–µ–æ, —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–≥–æ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Ñ–æ—Ä–º—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞"};const x=document.createElement("form");i.appendChild(x),x.id="simple",x.action="http://localhost:9999/upload",x.method="POST",x.enctype="multipart/form-data";const g=N("div","form-group",x),k=document.createElement("label");g.appendChild(k),k.for="exampleFormControlFile1",k.textContent="–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ —Å —Ñ–∞–π–ª–æ–º. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞, —Ñ–∞–π–ª –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ—Å—É—Ä—Å";const w=N("input","form-control-file",g);w.type="file",w.name="media",document.querySelector("input[name=media]").addEventListener("change",t=>{t.preventDefault();const[e]=Array.from(t.currentTarget.files),n=new FormData;n.append("media",e),h.disabled=!0,k.textContent="–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞...",fetch(`${o}/upload`,{method:"POST",body:n}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}).then(t=>{const e=`${o}/static/${t.name}`;b.value=e,k.textContent="–§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω"}).catch(t=>{console.log(t),k.textContent=`–û—à–∏–±–∫–∞! –§–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω.${t}`}).finally(()=>{h.disabled=!1}),t.currentTarget.value=""});const E=N("button","btn btn-primary my-2 mr-sm-2",x);E.textContent="–î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ";const S=N("p","card-text",x);S.textContent="–ü–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ –≤–∏–¥–µ–æ, —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–≥–æ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Ñ–æ—Ä–º—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞";const $=document.createElement("div");x.appendChild($),E.addEventListener("click",t=>{if(t.preventDefault(),$.innerHTML="",!navigator.mediaDevices){const t=document.createElement("div");return t.textContent="Your browser not support media! Use Yande Browser.",void document.body.appendChild(t)}const e=document.createElement("video");if(e.id="output",e.width="400",e.height="300",$.appendChild(e),!window.MediaRecorder){const t=document.createElement("div");return t.textContent="Your browser not media recordering! Use Yande Browser.",void document.body.appendChild(t)}navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(t=>{const n=new MediaRecorder(t,{mediaType:"video/webm"}),r=[];n.addEventListener("dataavailable",t=>{r.push(t.data)}),n.addEventListener("stop",n=>{t.getTracks().forEach(t=>t.stop());const i=new Blob(r);e.srcObject=null;const s=new FormData;s.append("media",i),fetch(`${o}/upload`,{method:"POST",body:s}).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}).then(t=>{const n=`${o}/static/${t.name}`;e.src=n,e.controls=!0,e.muted=!0,e.play(),S.textContent="–í–∏–¥–µ–æ –∑–∞–ø–∏—Å–∞–Ω–æ, —Å—Å—ã–ª–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞",b.value=n}).catch(t=>{console.log(t)})}),n.start(),e.srcObject=t,e.muted=!0,e.controls=!1,e.play(),S.textContent="–ò–¥–µ—Ç –∑–∞–ø–∏—Å—å –≤–∏–¥–µ–æ...",setTimeout(()=>{n.stop()},5e3)}).catch(t=>{console.log(t)})});const T=N("button","btn btn-primary d-block mx-auto mt-2",i);T.textContent="–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ—Å—Ç—ã",T.setAttribute("data-id","load-new-posts-button"),T.addEventListener("click",(function(){fetch(`${o}/get-new-posts/${l}`).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}).then(t=>{"false"!==t&&(j(t),T.classList.toggle("button-invisibility"),M())}).catch(t=>{console.log(t)})})),T.classList.toggle("button-invisibility");const O=N("ul","list-group",i),q=N("button","btn btn-primary d-block mx-auto mt-2",i);function L(){fetch(`${o}/posts/${a}/${d}`).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}).then(t=>{if(t.length>=d)j(t),i.appendChild(q);else if(0===t.length){const t=i.querySelector("[data-id=load-more-button]");i.removeChild(t)}else{j(t);const e=i.querySelector("[data-id=load-more-button]");i.removeChild(e)}setInterval(()=>{fetch(`${o}/new-posts/${l}`).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.text()}).then(t=>{"false"!==t&&(T.classList.remove("button-invisibility"),T.textContent=`–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ—Å—Ç—ã (${t})`)}).catch(t=>{console.log(t)})},5e3)}).catch(t=>{console.log(t)})}function j(t){for(const n of t)if(-1===!P(n.id))e=n.id,fetch(`${o}/post/${e}`).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}).then(t=>{const e=s[P(t.id)];e.likes=t.likes;const n=O.querySelector(`[data-post-id = ${e.id}]`),o=n.querySelector("[data-id = button-like]");o.textContent="‚ù§ "+e.likes}).catch(t=>{console.log(t)});else{const t=N("div","card my-2 mr-sm-2",O);t.setAttribute("data-post-id",`${n.id}`);let e="";if("regular"===n.typeContent){N("h5","card-text ml-3",t).textContent=n.linkContent,e="–ü–æ—Å—Ç —Å —Ç–µ–∫—Å—Ç–æ–º"}else if("image"===n.typeContent){N("img","card-img-top",t).src=n.linkContent,e="–ü–æ—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º"}else if("audio"===n.typeContent){const o=N("audio","card-img-top",t);o.src=n.linkContent,o.controls=!0,e="–ü–æ—Å—Ç —Å –∞—É–¥–∏–æ"}else if("video"===n.typeContent){const o=N("video","embed-responsive-item",t);o.src=n.linkContent,o.controls=!0,e="–ü–æ—Å—Ç —Å –≤–∏–¥–µ–æ"}else{N("p","card-text",t).textContent="–°–ø–∞–º",e="–ü–æ—Å—Ç —Å–æ —Å–ø–∞–º–æ–º"}const o=N("div","card-body",t);N("p","card-text",o).textContent=e;const i=N("button","btn btn-primary",o);i.textContent="‚ù§ "+n.likes,i.setAttribute("data-id","button-like"),i.onclick=function(){r.postJSON(`/posts/${n.id}/likes`,null,J,R)};const a=N("button","btn btn-primary ml-2",o);a.textContent="üëé",a.onclick=function(){r.deleteJSON(`/posts/${n.id}/likes`,null,J,R)},s.unshift(n)}var e;s.sort((t,e)=>e.id-t.id),a=s[s.length-1].id,l=s[0].id+1}function M(){s.sort((t,e)=>e.id-t.id),O.innerHTML="";for(const t of s){const e=N("div","card my-2 mr-sm-2",O);e.setAttribute("data-post-id",`${t.id}`);let n="";if("regular"===t.typeContent){N("h5","card-text ml-3",e).textContent=t.linkContent,n="–ü–æ—Å—Ç —Å —Ç–µ–∫—Å—Ç–æ–º"}else if("image"===t.typeContent){N("img","card-img-top",e).src=t.linkContent,n="–ü–æ—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º"}else if("audio"===t.typeContent){const o=N("audio","card-img-top",e);o.src=t.linkContent,o.controls=!0,n="–ü–æ—Å—Ç —Å –∞—É–¥–∏–æ"}else if("video"===t.typeContent){const o=N("video","embed-responsive-item",e);o.src=t.linkContent,o.controls=!0,n="–ü–æ—Å—Ç —Å –≤–∏–¥–µ–æ"}else{N("p","card-text",e).textContent="–°–ø–∞–º",n="–ü–æ—Å—Ç —Å–æ —Å–ø–∞–º–æ–º"}const o=N("div","card-body",e);N("p","card-text",o).textContent=n;const i=N("button","btn btn-primary",o);i.textContent="‚ù§ "+t.likes,i.setAttribute("data-id","button-like"),i.onclick=function(){r.postJSON(`/posts/${t.id}/likes`,null,J,R)};const s=N("button","btn btn-primary ml-2",o);s.textContent="üëé",s.onclick=function(){r.deleteJSON(`/posts/${t.id}/likes`,null,J,R)}}}function N(t,e,n){const o=document.createElement(t);return o.className=e,n.appendChild(o),o}function J(t){const e=s[P(t.id)];e.likes=t.likes,O.querySelector(`[data-post-id="${e.id}"]`).querySelector("[data-id='button-like']").textContent="‚ù§ "+e.likes}function P(t){return s.findIndex(e=>e.id===t)}function A(t){s.unshift(t),l=s[0].id+1,M()}q.textContent="–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ",q.setAttribute("data-id","load-more-button"),q.addEventListener("click",L),i.removeChild(q);const R=t=>{console.log(t)};L()}]);